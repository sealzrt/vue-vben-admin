import{E as k,r as B,c as R,w as L}from"./entry/index-1163f12d-1703821863576.js";import{d as T,f as D,r as F,c as h,u as e,w as P,o as q,x as A,l,Z as U,a8 as Z,a9 as m,E as y,$ as _,a0 as H}from"./vue-d56f5f31.js";import{P as j}from"./index-9f5f841f.js";import{a3 as N}from"./antd-090f1744.js";import"./useContentViewHeight-17e909ee.js";import"./useWindowSizeFn-ab2a372a.js";import"./onMountedOrActivated-60a5193f.js";const z={height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String],bench:{type:[Number,String],default:0},itemHeight:{type:[Number,String],required:!0},items:{type:Array,default:()=>[]}},f="virtual-scroll";function a(t,o="px"){if(!(t==null||t===""))return isNaN(+t)?String(t):`${Number(t)}${o}`}const G=T({name:"VirtualScroll",props:z,setup(t,{slots:o}){const s=D(null),r=F({first:0,last:0,scrollTop:0}),c=h(()=>parseInt(t.bench,10)),d=h(()=>parseInt(t.itemHeight,10)),g=h(()=>Math.max(0,r.first-e(c))),V=h(()=>Math.min((t.items||[]).length,r.last+e(c))),E=h(()=>({height:a((t.items||[]).length*e(d))})),I=h(()=>{const i={},n=a(t.height),u=a(t.minHeight),S=a(t.minWidth),b=a(t.maxHeight),w=a(t.maxWidth),x=a(t.width);return n&&(i.height=n),u&&(i.minHeight=u),S&&(i.minWidth=S),b&&(i.maxHeight=b),w&&(i.maxWidth=w),x&&(i.width=x),i});P([()=>t.itemHeight,()=>t.height],()=>{p()});function v(i){const n=e(s);if(!n)return 0;const u=parseInt(t.height||0,10)||n.clientHeight;return i+Math.ceil(u/e(d))}function C(){return Math.floor(r.scrollTop/e(d))}function p(){const i=e(s);i&&(r.scrollTop=i.scrollTop,r.first=C(),r.last=v(r.first))}function $(){const{items:i=[]}=t;return i.slice(e(g),e(V)).map(M)}function M(i,n){n+=e(g);const u=a(n*e(d));return l("div",{class:`${f}__item`,style:{top:u},key:n},[B(o,"default",{index:n,item:i})])}return q(()=>{r.last=v(0),A(()=>{const i=e(s);i&&k({el:i,name:"scroll",listener:p,wait:0})})}),()=>l("div",{class:f,style:e(I),ref:s},[l("div",{class:`${f}__container`,style:e(E)},[$()])])}});const J=R(G,[["__scopeId","data-v-16482a0c"]]),W=L(J),K={class:"virtual-scroll-demo-wrap"},O={class:"virtual-scroll-demo__item"},Q={class:"virtual-scroll-demo-wrap"},X={class:"virtual-scroll-demo__item"},Y=T({__name:"VirtualScroll",setup(t){const o=(()=>{const s=[];for(let r=1;r<2e4;r++)s.push({title:"列表项"+r});return s})();return(s,r)=>(U(),Z(e(j),{class:"virtual-scroll-demo"},{default:m(()=>[l(e(N),null,{default:m(()=>[y("基础滚动示例")]),_:1}),_("div",K,[l(e(W),{itemHeight:41,items:e(o),height:300,width:300},{default:m(({item:c})=>[_("div",O,H(c.title),1)]),_:1},8,["items"])]),l(e(N),null,{default:m(()=>[y("即使不可见，也预先加载50条数据，防止空白")]),_:1}),_("div",Q,[l(e(W),{itemHeight:41,items:e(o),height:300,width:300,bench:50},{default:m(({item:c})=>[_("div",X,H(c.title),1)]),_:1},8,["items"])])]),_:1}))}});const lt=R(Y,[["__scopeId","data-v-4bd1bb22"]]);export{lt as default};
