var Z=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var H=(e,u,b)=>u in e?Z(e,u,{enumerable:!0,configurable:!0,writable:!0,value:b}):e[u]=b,f=(e,u)=>{for(var b in u||(u={}))oe.call(u,b)&&H(e,b,u[b]);if(B)for(var b of B(u))se.call(u,b)&&H(e,b,u[b]);return e},J=(e,u)=>ee(e,te(u));import{c as O,u as o,d as ne,G as le,n as ae,l as g,i as re,ac as z,z as ce,E as ie}from"./vue-d56f5f31.js";import{c as E}from"./componentMap-e24e33c4.js";import{r as $,h as de,V as fe,W as ue}from"./entry/index-1163f12d-1703821863576.js";import{i as me,N as K,c as U,s as he}from"./helper-794fc484.js";import{a9 as be,e as P,ag as F,U as G,a3 as pe,a1 as Q,f as ge,r as ye,w as Ce}from"./antd-090f1744.js";function Pe(e){return"slot"in e}function xe(e){return!Pe(e)}function we(e,u){return O(()=>{const b=o(e),{labelCol:v={},wrapperCol:k={}}=b.itemProps||{},{labelWidth:q,disabledLabelWidth:p}=b,{labelWidth:y,labelCol:I,wrapperCol:L,layout:N}=o(u);if(!y&&!q&&!I||p)return v.style={textAlign:"left"},{labelCol:v,wrapperCol:k};let x=q||y;const V=f(f({},I),v),D=f(f({},L),k);return x&&(x=be(x)?`${x}px`:x),{labelCol:f({style:{width:x}},V),wrapperCol:f({style:{width:N==="vertical"?"100%":`calc(100% - ${x})`}},D)}})}function _(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!re(e)}const Me=ne({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(e,{slots:u}){const{t:b}=de(),{schema:v,formProps:k}=le(e),q=we(v,k),p=O(()=>{const{allDefaultValues:s,formModel:t,schema:r}=e,{mergeDynamicData:l}=e.formProps;return{field:r.field,model:t,values:f(f(f({},l),s),t),schema:r}}),y=O(()=>{var a;const{schema:s,tableAction:t,formModel:r,formActionType:l}=e;let{componentProps:n={}}=s;return P(n)&&(n=(a=n({schema:s,tableAction:t,formModel:r,formActionType:l}))!=null?a:{}),me(s.component)&&(n=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},n)),n}),I=O(()=>{const{disabled:s}=e.formProps,{dynamicDisabled:t}=e.schema,{disabled:r=!1}=o(y);let l=!!s||r;return F(t)&&(l=t),P(t)&&(l=t(o(p))),l}),L=O(()=>{const{readonly:s}=e.formProps,{dynamicReadonly:t}=e.schema,{readonly:r=!1}=o(y);let l=s||r;return F(t)&&(l=t),P(t)&&(l=t(o(p))),l});function N(){const{show:s,ifShow:t}=e.schema,{showAdvancedButton:r}=e.formProps,l=r&&F(e.isAdvanced)?e.isAdvanced:!0;let n=!0,a=!0;return F(s)&&(n=s),F(t)&&(a=t),P(s)&&(n=s(o(p))),P(t)&&(a=t(o(p))),n=n&&l,{isShow:n,isIfShow:a}}function x(){var M;const{rules:s=[],component:t,rulesMessageJoinLabel:r,label:l,dynamicRules:n,required:a}=e.schema;if(P(n))return n(o(p));let c=ge(s);const{rulesMessageJoinLabel:S}=e.formProps,w=(Reflect.has(e.schema,"rulesMessageJoinLabel")?r:S)?l:"",m=t?U(t)+w:w;function h(d,i){const C=d.message||m;return i===void 0||ye(i)||Array.isArray(i)&&i.length===0||typeof i=="string"&&i.trim()===""||typeof i=="object"&&Reflect.has(i,"checked")&&Reflect.has(i,"halfChecked")&&Array.isArray(i.checked)&&Array.isArray(i.halfChecked)&&i.checked.length===0&&i.halfChecked.length===0?Promise.reject(C):Promise.resolve()}const j=P(a)?a(o(p)):a;if(j)if(!c||c.length===0){const d=K.includes(t||"Input")?"blur":"change";c=[{required:j,validator:h,trigger:d}]}else c.findIndex(i=>Reflect.has(i,"required"))===-1&&c.push({required:j,validator:h});const T=c.findIndex(d=>Reflect.has(d,"required")&&!Reflect.has(d,"validator"));if(T!==-1){const d=c[T],{isShow:i}=N();if(i||(d.required=!1),t){d.message=d.message||m,(t.includes("Input")||t.includes("Textarea"))&&(d.whitespace=!0);const C=(M=o(y))==null?void 0:M.valueFormat;he(d,t,C)}}const A=c.findIndex(d=>d.max);return A!==-1&&!c[A].validator&&(c[A].message=c[A].message||b("component.form.maxTip",[c[A].max])),c}function V(){var d;if(!xe(e.schema))return null;const{renderComponentContent:s,component:t,field:r,changeEvent:l="change",valueField:n}=e.schema,a=t&&["Switch","Checkbox"].includes(t),c=`on${Ce(l)}`,S={[c]:(...i)=>{const[C]=i;h[c]&&h[c](...i);const W=C?C.target:null,Y=W?a?W.checked:W.value:C;e.setFormModel(r,Y,e.schema)}},R=E.get(t),{autoSetPlaceHolder:w,size:m}=e.formProps,h=J(f({allowClear:!0,size:m},o(y)),{disabled:o(I),readonly:o(L)});!h.disabled&&w&&t!=="RangePicker"&&t&&(h.placeholder=((d=o(y))==null?void 0:d.placeholder)||U(t)),h.codeField=r,h.formValues=o(p);const T={[n||(a?"checked":"value")]:e.formModel[r]},A=f(f(f({},h),S),T);if(!s)return g(R,A,null);const M=P(s)?f({},s(o(p),{disabled:o(I),readonly:o(L)})):{default:()=>s};return g(R,A,_(M)?M:{default:()=>[M]})}function D(){const{label:s,helpMessage:t,helpComponentProps:r,subLabel:l}=e.schema,n=l?g("span",null,[s,ie(" "),g("span",{class:"text-secondary"},[l])]):s,a=P(t)?t(o(p)):t;return!a||Array.isArray(a)&&a.length===0?n:g("span",null,[n,g(ue,z({placement:"top",class:"mx-1",text:a},r),null)])}function X(){const{itemProps:s,slot:t,render:r,field:l,suffix:n,component:a}=e.schema,{labelCol:c,wrapperCol:S}=o(q),{colon:R}=e.formProps,w={disabled:o(I),readonly:o(L)};if(a==="Divider"){let m;return g(G,{span:24},{default:()=>[g(pe,o(y),_(m=D())?m:{default:()=>[m]})]})}else if(a==="BasicTitle"){let m;return g(Q.Item,{labelCol:c,wrapperCol:S,name:l,class:{"suffix-item":!!n}},{default:()=>[g(fe,o(y),_(m=D())?m:{default:()=>[m]})]})}else{const m=()=>t?$(u,t,o(p),w):r?r(o(p),w):V(),h=!!n,j=P(n)?n(o(p)):n;return a&&K.includes(a)&&e.schema&&(e.schema.itemProps=f({autoLink:!1},e.schema.itemProps)),g(Q.Item,z({name:l,colon:R,class:{"suffix-item":h}},s,{label:D(),rules:x(),labelCol:c,wrapperCol:S}),{default:()=>[g("div",{style:"display:flex"},[g("div",{style:"flex:1;"},[m()]),h&&g("span",{class:"suffix"},[j])])]})}}return()=>{let s;const{colProps:t={},colSlot:r,renderColContent:l,component:n,slot:a}=e.schema;if(!(n&&E.has(n)||a))return null;const{baseColProps:c={}}=e.formProps,S=f(f({},c),t),{isIfShow:R,isShow:w}=N(),m=o(p),h={disabled:o(I),readonly:o(L)};return R&&ae(g(G,S,_(s=(()=>r?$(u,r,m,h):l?l(m,h):X())())?s:{default:()=>[s]}),[[ce,w]])}}});export{Me as _};
